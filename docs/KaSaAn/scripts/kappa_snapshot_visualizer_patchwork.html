<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>KaSaAn.scripts.kappa_snapshot_visualizer_patchwork API documentation</title>
<meta name="description" content="Visualize a kappa snapshot using a plain graph â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>KaSaAn.scripts.kappa_snapshot_visualizer_patchwork</code></h1>
</header>
<section id="section-intro">
<p>Visualize a kappa snapshot using a plain graph.</p>
<pre><code class="language-text">usage: kappa_snapshot_visualizer_patchwork [-h] -sf SNAPSHOT_FILE [-cs COLORING_SCHEME] [-vm {all,mass,count,size}] [-of OUTPUT_FILE] [-fs WIDTH HEIGHT] [-dpi DOTS_PER_INCH] [-ts TEXT_SIZE]
[-h]                            Show detailed help.
-sf SNAPSHOT_FILE_NAME          Name of snapshot to visualize.
[-cs FILE_NAME]                 File specifying a coloring scheme.
[-vm [all|mass|count|size]]     How to scale area; default plots all three.
[-of OUTPUT_FILE]               The common file name for saving figures; shown if not given.
[-fs WIDTH HEIGHT]              Size of the resulting figure, in inches.
[-dpi DOTS_PER_INCH]            Resolution of the figure.
[-ts TEXT_SIZE]                 Override default size for text, in points.
[--text_instead_of_paths]       Output text elements instead of paths; embeds used glyphs
</code></pre>
<p>For example:</p>
<p><img alt="" loading="lazy" src="../../img/kite_snap_patchwork.png"></p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="KaSaAn.scripts.kappa_snapshot_visualizer_patchwork.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>args=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main(args=None):
    &#34;&#34;&#34;Visualize a kappa snapshot using a patchwork layout, where the area colored is proportional to the metric
    assayed. Metrics supported are mass (default), size, or count of each molecular species. Composition of each
    species is also displayed.&#34;&#34;&#34;
    if args is None:
        args = sys.argv[1:]
    parser = argparse.ArgumentParser(description=main.__doc__)
    parser.add_argument(&#39;-sf&#39;, &#39;--snapshot_file&#39;, type=str, required=True,
                        help=&#39;Name of the snapshot file to be viewed.&#39;)
    parser.add_argument(&#39;-cs&#39;, &#39;--coloring_scheme&#39;, type=str,
                        help=&#39;Optional file containing a dictionary with color scheme to use for species composition.&#39;
                             &#39; E.g. &lt;{&#34;Bob&#34;: #fff, &#34;Mary&#34;: #999, &#34;Sue&#34;: #222}&gt;, where the color can be anything&#39;
                             &#39; converable to a color by MatPlotLib (e.g. RGB[A] tuples, hex-strings, XKCD colors...).&#39;
                             &#39; If not provided, one will be generated, but bear in mind it is unlikely to match one&#39;
                             &#39; generated by a different snapshot.&#39;)
    parser.add_argument(&#39;-vm&#39;, &#39;--visualization_mode&#39;, choices=[&#39;all&#39;, &#39;mass&#39;, &#39;count&#39;, &#39;size&#39;], type=str,
                        default=&#39;all&#39;,
                        help=&#39;Type of visualization: size displays biggest species largest;&#39;
                             &#39; count displays most abundant species largest; mass is the&#39;
                             &#39; product of size times abundance, indicative of &#34;where is the&#39;
                             &#39; bulk of my system&#34;.&#39;)
    parser.add_argument(&#39;-of&#39;, &#39;--output_file&#39;, type=Path, default=None,
                        help=&#39;Optional name of file to save the view to instead of displaying it on screen. Extension&#39;
                             &#39; dictates the format. Valid choices include PNG, PDF, SVG (anything supported by&#39;
                             &#39; MatPlotLib).&#39;)
    parser.add_argument(&#39;-fs&#39;, &#39;--fig_size&#39;, type=float, default=mpl.rcParams[&#39;figure.figsize&#39;], nargs=2,
                        help=&#39;Size of the resulting figure, in inches, specified as two elements, width and height&#39;
                             &#39; (text size is specified in points, so this affects the size of text relative to other&#39;
                             &#39; graph elements).&#39;)
    parser.add_argument(&#39;-dpi&#39;, &#39;--dots_per_inch&#39;, type=float, default=mpl.rcParams[&#39;figure.dpi&#39;],
                        help=&#39;Resolution of the figure, specified as dots per inch.&#39;)
    parser.add_argument(&#39;-ts&#39;, &#39;--text_size&#39;, type=int,
                        help=&#34;If given, set point size for all text elements, overriding MatPlotLib&#39;s default.&#34;)
    parser.add_argument(&#39;--text_instead_of_paths&#39;, action=&#39;store_true&#39;,
                        help=&#39;If set, figure will embed used glyphs and export text elements, instead of rendering the&#39;
                             &#39; glyphs into paths. Only supported for PDF export.&#39;)

    args = parser.parse_args()

    if args.text_size:
        mpl.rcParams[&#39;font.size&#39;] = args.text_size
    if args.text_instead_of_paths:
        plt.rcParams[&#39;pdf.fonttype&#39;] = 42

    # for user-defined coloring schemes, read the dictionary from a file, convert keys to KappaAgent
    if args.coloring_scheme:
        coloring_scheme = {}
        with open(args.coloring_scheme, &#39;r&#39;) as cs_file:
            coloring_scheme_raw = ast.literal_eval(cs_file.read())
            for key, value in coloring_scheme_raw.items():
                coloring_scheme[KappaAgent(key)] = value
    else:
        coloring_scheme = None
    # make the figure
    fig = render_snapshot_as_patchwork(snapshot_file=args.snapshot_file,
                                       color_scheme=coloring_scheme,
                                       vis_mode=args.visualization_mode,
                                       fig_size=args.fig_size,
                                       fig_res=args.dots_per_inch)
    # Either save figure to file, or plot it
    if args.output_file:
        if not args.output_file.parent.exists():
            args.output_file.parent.mkdir(parents=True)
        fig.savefig(args.output_file, bbox_inches=&#39;tight&#39;)
    else:
        plt.show()</code></pre>
</details>
<div class="desc"><p>Visualize a kappa snapshot using a patchwork layout, where the area colored is proportional to the metric
assayed. Metrics supported are mass (default), size, or count of each molecular species. Composition of each
species is also displayed.</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="KaSaAn.scripts" href="index.html">KaSaAn.scripts</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="KaSaAn.scripts.kappa_snapshot_visualizer_patchwork.main" href="#KaSaAn.scripts.kappa_snapshot_visualizer_patchwork.main">main</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
